!function e(t,n,r){function i(u,s){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,t,n){"use strict";var r=e("./PubSub"),i=e("./PCP");!function(e){var t={PCP:i.PCP,PubSub:r.PubSub};e.pcp=t}(window)},{"./PCP":2,"./PubSub":3}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./PubSub"),u=function(){function e(){r(this,e),this._mainEleID="",this._listenerList={},this._paletteColorList=null,this._selectorColorList=null,this._pubsub=new o.PubSub,this._uiPaletteContainer=null,this._uiSelectorContainer=null,this._uiMainContainer=null}return i(e,[{key:"init",value:function(e,t,n){function r(){this._uiPaletteContainer=document.createElement("ul"),this._uiSelectorContainer=document.createElement("ul"),this._uiMainContainer=document.getElementById(this.getMainEleId()),this._uiPaletteContainer.classList.add("pcp-palette"),this._uiSelectorContainer.classList.add("pcp-selector"),this._uiMainContainer.appendChild(this._uiPaletteContainer),this._uiMainContainer.appendChild(this._uiSelectorContainer)}return this._mainEleID=e,r.call(this),this.setPalette(t),this.setSelector(n),this}},{key:"getMainEleId",value:function(){return this._mainEleID}},{key:"setPalette",value:function(e){function t(e){for(var t=this._uiPaletteContainer.children,n=e.currentTarget.classList.contains("current-selection"),r=0;r<t.length;r++)t[r].classList.remove("current-selection");n?e.currentTarget.classList.remove("current-selection"):e.currentTarget.classList.add("current-selection")}document.querySelector("#"+this.getMainEleId()+" .pcp-palette");this._uiPaletteContainer.innerHTML="",this._paletteColorList=e;for(var n=0;n<e.length;n++){var r=this._makeColorEle(e[n]);r.addEventListener("click",t.bind(this)),this._uiPaletteContainer.appendChild(r)}}},{key:"getPalette",value:function(){return this._paletteColorList}},{key:"setSelector",value:function(t){function n(t){function n(e){for(var t=null,n=e.children,r=0;r<n.length;r++)n[r].classList.contains("current-selection")&&(t=n[r]);return t}function r(e,t){for(var n=e.children,r=0;r<n.length;r++)if(n[r]===t)return r;return-1}var i=n(this._uiPaletteContainer),o=t.currentTarget.style.backgroundColor;if(i){i.className=t.currentTarget.className,i.classList.add("current-selection"),i.style.backgroundColor=o;var u=r(this._uiPaletteContainer,i);o=t.currentTarget.classList.contains(e.COLOR_NONE)?e.COLOR_NONE:o,this._paletteColorList=this._parseColorUi(this._uiPaletteContainer),this._notifyListener({index:u,color:o,colorSet:this.getPalette(),taret:i})}}this._uiSelectorContainer.innerHTML="",this._selectorColorList=t;for(var r=0;r<t.length;r++){var i=this._makeColorEle(t[r]);i.addEventListener("click",n.bind(this)),this._uiSelectorContainer.appendChild(i)}}},{key:"getSelector",value:function(){return this._selectorColorList}},{key:"addEventListener",value:function(e){if("undefined"===name||null===name||"string"!=typeof name)throw new TypeError("parameter name should be type of string: "+name);return this._pubsub.subscribe("event",e)}},{key:"removeEventListener",value:function(e){var t=this._pubsub.unsubscribe("event",e);if(!t)throw new Error("remove event failed");return t}},{key:"_notifyListener",value:function(e){return this._pubsub.publish("event",e)}},{key:"_makeColorEle",value:function(t){var n=document.createElement("li"),r=document.createElement("span");return t.color===e.COLOR_NONE?n.classList.toggle(e.COLOR_NONE):n.style.backgroundColor=t.color,r.appendChild(document.createTextNode(t.name)),n.appendChild(r),n}},{key:"_parseColorUi",value:function(t){for(var n=[],r=t.children,i=0;i<r.length;i++){var o={},u=r[i].classList.contains(e.COLOR_NONE)?e.COLOR_NONE:r[i].style.backgroundColor,s=r[i].childNodes[0].innerText||r[i].childNodes[0].textContent;o.label=s,o.color=u,n.push(o)}return n}}],[{key:"COLOR_NONE",get:function(){return"color-none"}}]),e}();n.PCP=u},{"./PubSub":3}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this._topics={}}return i(e,[{key:"publish",value:function(e,t){if(!this._topics[e])return!1;for(var n=this._topics[e],r=0;r<n.length;r++)n[r].doSomething(t);return!0}},{key:"subscribe",value:function(e,t){this._topics[e]||(this._topics[e]=[]);var n=Symbol(),r={token:n,doSomething:t};return this._topics[e].push(r),n}},{key:"unsubscribe",value:function(e,t){if(!this._topics[e])return!1;if(0===this._topics[e].length)return!1;for(var n=this._topics[e],r=0;r<n.length;r++)if(n[r].token===t)return n.splice(r,1);return!1}},{key:"hasTopic",value:function(e){return this._topics[e]?!0:!1}},{key:"availableTopics",value:function(){return Object.keys(this._topics)}},{key:"subscribers",value:function(){var e=[];for(var t in this._topics)if(this._topics[t]){var n={topic:t,subscribers:this._topics[t].length};e.push(n)}return e}}]),e}();n.PubSub=o},{}]},{},[1]);