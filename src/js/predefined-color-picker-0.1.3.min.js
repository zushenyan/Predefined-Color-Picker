!function e(t,n,i){function r(s,u){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!u&&l)return l(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";var i=e("./PubSub"),r=e("./PCP");!function(e){var t={PCP:r.PCP,PubSub:i.PubSub};e.pcp=t}(window)},{"./PCP":2,"./PubSub":3}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e("./PubSub"),s=function(){function e(){i(this,e),this._mainEleID="",this._listenerList={},this._paletteColorList=null,this._selectorColorList=null,this._pubsub=new o.PubSub,this._uiPaletteContainer=null,this._uiSelectorContainer=null,this._uiMainContainer=null}return r(e,[{key:"init",value:function(e,t,n){function i(){this._uiPaletteContainer=document.createElement("ul"),this._uiSelectorContainer=document.createElement("ul"),this._uiMainContainer=document.getElementById(this.getMainEleId()),this._uiPaletteContainer.classList.add("pcp-palette"),this._uiSelectorContainer.classList.add("pcp-selector"),this._uiMainContainer.appendChild(this._uiPaletteContainer),this._uiMainContainer.appendChild(this._uiSelectorContainer)}return this._mainEleID=e,i.call(this),this.setPalette(t),this.setSelector(n),this}},{key:"getMainEleId",value:function(){return this._mainEleID}},{key:"setPalette",value:function(e){function t(e){for(var t=this._uiPaletteContainer.children,n=e.currentTarget.classList.contains("current-selection"),i=0;i<t.length;i++)t[i].classList.remove("current-selection");n?e.currentTarget.classList.remove("current-selection"):e.currentTarget.classList.add("current-selection")}document.querySelector("#"+this.getMainEleId()+" .pcp-palette");this._uiPaletteContainer.innerHTML="",this._paletteColorList=e;for(var n=0;n<e.length;n++){var i=this._makeColorEle(e[n]);i.addEventListener("click",t.bind(this)),this._uiPaletteContainer.appendChild(i)}this._notifyListener({type:"setPalette",colorSet:this.getPalette()})}},{key:"getPalette",value:function(){return this._paletteColorList}},{key:"setSelector",value:function(t){function n(t){function n(e){for(var t=null,n=e.children,i=0;i<n.length;i++)n[i].classList.contains("current-selection")&&(t=n[i]);return t}function i(e,t){for(var n=e.children,i=0;i<n.length;i++)if(n[i]===t)return i;return-1}var r=n(this._uiPaletteContainer),o=t.currentTarget.style.backgroundColor;if(r){r.className=t.currentTarget.className,r.classList.add("current-selection"),r.style.backgroundColor=o;var s=i(this._uiPaletteContainer,r);o=t.currentTarget.classList.contains(e.COLOR_NONE)?e.COLOR_NONE:o,this._paletteColorList=this._parseColorUi(this._uiPaletteContainer),this._notifyListener({type:"selection",index:s,color:o,colorSet:this.getPalette(),taret:r})}}this._uiSelectorContainer.innerHTML="",this._selectorColorList=t;for(var i=0;i<t.length;i++){var r=this._makeColorEle(t[i]);r.addEventListener("click",n.bind(this)),this._uiSelectorContainer.appendChild(r)}this._notifyListener({type:"setSelector",colorSet:this.getSelector()})}},{key:"getSelector",value:function(){return this._selectorColorList}},{key:"addEventListener",value:function(e){if("undefined"===name||null===name||"string"!=typeof name)throw new TypeError("parameter name should be type of string: "+name);return this._pubsub.subscribe("event",e)}},{key:"removeEventListener",value:function(e){var t=this._pubsub.unsubscribe("event",e);if(!t)throw new Error("remove event failed");return t}},{key:"_notifyListener",value:function(e){return this._pubsub.publish("event",e)}},{key:"_makeColorEle",value:function(t){var n=document.createElement("li"),i=document.createElement("span");return t.color===e.COLOR_NONE?n.classList.toggle(e.COLOR_NONE):n.style.backgroundColor=t.color,i.appendChild(document.createTextNode(t.label)),n.appendChild(i),n}},{key:"_parseColorUi",value:function(t){for(var n=[],i=t.children,r=0;r<i.length;r++){var o={},s=i[r].classList.contains(e.COLOR_NONE)?e.COLOR_NONE:i[r].style.backgroundColor,u=i[r].childNodes[0].innerText||i[r].childNodes[0].textContent;o.label=u,o.color=s,n.push(o)}return n}}],[{key:"COLOR_NONE",get:function(){return"color-none"}}]),e}();n.PCP=s},{"./PubSub":3}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this._topics={}}return r(e,[{key:"publish",value:function(e,t){if(!this._topics[e])return!1;for(var n=this._topics[e],i=0;i<n.length;i++)n[i].doSomething(t);return!0}},{key:"subscribe",value:function(e,t){this._topics[e]||(this._topics[e]=[]);var n=Symbol(),i={token:n,doSomething:t};return this._topics[e].push(i),n}},{key:"unsubscribe",value:function(e,t){if(!this._topics[e])return!1;if(0===this._topics[e].length)return!1;for(var n=this._topics[e],i=0;i<n.length;i++)if(n[i].token===t)return n.splice(i,1);return!1}},{key:"hasTopic",value:function(e){return this._topics[e]?!0:!1}},{key:"availableTopics",value:function(){return Object.keys(this._topics)}},{key:"subscribers",value:function(){var e=[];for(var t in this._topics)if(this._topics[t]){var n={topic:t,subscribers:this._topics[t].length};e.push(n)}return e}}]),e}();n.PubSub=o},{}]},{},[1]);